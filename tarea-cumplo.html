<head>
  <title>Quandl Connection</title>
</head>

<body>
  <!-- Database info -->
  <div id="database-info">
    <img src="{{databaseInfo.image}}" id="database-image" class="img-circle"/>
    <div id="database-header">Using database: {{databaseInfo.database_code}}</div>
    <p>Name: {{databaseInfo.name}}</p>
    <p>Description: {{databaseInfo.description}}</p>
    <p>Number of datasets: {{databaseInfo.datasets_count}}</p>
  </div>
  <hr>
 
  <div id="dataset-options">
     <h1>Datasets:</h1>
    <!-- Dataset search -->
    <div id="dataset-search">
      <div id="dataset-search-header"> <h2>Search for a dataset:</h2></div>
      <div id="dataset-search-searchbar"></div>
      <form class="dataset-name">
          <input id="dataset-input" type="text" name="text" placeholder="Search for dataset" />
      </form>
      {{searchResult}}
    </div>
    <hr />
  <!-- Dataset list -->
    <div id="dataset-list">
        <h2>Select dataset</h2>
      {{#if datasetList}}
        {{#each datasetList}}
           {{> datasetLink}}
        {{/each}}
         
      {{/if}}
      <div id="dataset-buttons">
          <input id="dataset-back" type="button" value="<" class="btn btn-primary" />
          <input id="dataset-forward" type="button" value=">" class="btn btn-primary" />
      </div>
    </div>

  </div>
  

  <hr>
  {{#if datasetInfo}}
  <div id="dataset-data">
    <div id="dataset-info">
      <h1>Dataset: {{datasetInfo.dataset_code}}</h1>
      <p>Name: {{datasetInfo.name}}</p>
      <p>Desc: {{datasetInfo.description}}</p>
    </div>
  </div>
  {{/if}}
  <br />
  {{#if data}}
  <table style="width:80%" id="dataTable" class="table table-striped">
  <thead>
  {{> dataTableNames}}
  </thead>
  <tbody>
  	{{#each data}}
   		 {{> dataTableInfo}}
  	{{/each}}
  </tbody>
  	<!-- Buttons -->
  	<input id="data-back" type="button" value="<" class="btn btn-primary" />
    <input id="data-forward" type="button" value=">" class="btn btn-primary" />
	</table>
   {{/if}}
</body>

<template name="dataTableNames">
	<tr>
	{{#each column_names}}
		{{#each this.column_names}}
    	 <th>{{this}}</th>
    	 {{/each}}
   	{{/each}}

   	</tr>
</template>


<template name="dataTableInfo">
	<tr>
	{{#each values}}
    	 <th>{{this}}</th>
   	{{/each}}
   	</tr>
   

</template>


<template name="datasetLink">
<a class="datasetLink" href="{{this}}" >{{this}}</a>
</template>

